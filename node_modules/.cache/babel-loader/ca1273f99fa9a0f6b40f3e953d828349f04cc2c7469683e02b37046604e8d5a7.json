{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{toast}from'react-toastify';import{petsService,vaccinationsService,healthService}from'../services/api';import{useAuth}from'../context/AuthContext';import{formatDate,getSpeciesEmoji,getUrgencyColor}from'../utils/helpers';import LoadingSpinner from'./LoadingSpinner';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{const{user}=useAuth();const[pets,setPets]=useState([]);const[vaccinations,setVaccinations]=useState([]);const[healthRecords,setHealthRecords]=useState([]);const[loading,setLoading]=useState(true);const[stats,setStats]=useState({totalPets:0,upcomingVaccinations:0,recentHealthRecords:0,urgentIssues:0});useEffect(()=>{fetchDashboardData();},[]);const fetchDashboardData=async()=>{try{setLoading(true);const[petsRes,vaxRes,healthRes]=await Promise.all([petsService.getAll(),vaccinationsService.getAll(),healthService.getRecords()]);setPets(petsRes.data.pets||[]);setVaccinations(vaxRes.data.vaccinations||[]);setHealthRecords(healthRes.data.records||[]);// Calculate stats\nconst upcomingVax=vaxRes.data.vaccinations.filter(vax=>vax.status==='scheduled'&&new Date(vax.dueDate)>new Date()).length;const urgentIssues=healthRes.data.records.filter(record=>record.urgency==='emergency'||record.urgency==='urgent').length;setStats({totalPets:petsRes.data.pets.length,upcomingVaccinations:upcomingVax,recentHealthRecords:healthRes.data.records.length,urgentIssues});}catch(error){console.error('Dashboard data error:',error);toast.error('Error loading dashboard data');}finally{setLoading(false);}};const upcomingVaccinations=vaccinations.filter(vax=>vax.status==='scheduled'&&new Date(vax.dueDate)>new Date()).slice(0,5);const recentHealthRecords=healthRecords.slice(0,5);if(loading){return/*#__PURE__*/_jsx(LoadingSpinner,{text:\"Loading your dashboard...\",centered:true});}return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"dashboard-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-content\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"\\uD83D\\uDC3E Welcome back, \",user===null||user===void 0?void 0:user.firstName,\"!\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"Here's your pet health overview\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"header-actions\",children:/*#__PURE__*/_jsx(Link,{to:\"/pets\",className:\"btn btn-primary\",children:\"Manage Pets\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",children:\"\\uD83D\\uDC15\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:stats.totalPets}),/*#__PURE__*/_jsx(\"p\",{children:\"Total Pets\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",children:\"\\uD83D\\uDC89\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:stats.upcomingVaccinations}),/*#__PURE__*/_jsx(\"p\",{children:\"Upcoming Vaccinations\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",children:\"\\uD83C\\uDFE5\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:stats.recentHealthRecords}),/*#__PURE__*/_jsx(\"p\",{children:\"Health Records\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",children:\"\\u26A0\\uFE0F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:stats.urgentIssues}),/*#__PURE__*/_jsx(\"p\",{children:\"Urgent Issues\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"quick-actions\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Quick Actions\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"actions-grid\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/pets\",className:\"action-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"action-icon\",children:\"\\uD83D\\uDC36\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Manage Pets\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Add or edit pet profiles\"})]}),/*#__PURE__*/_jsxs(Link,{to:\"/vaccinations\",className:\"action-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"action-icon\",children:\"\\uD83D\\uDC89\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Vaccinations\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Track vaccination schedules\"})]}),/*#__PURE__*/_jsxs(Link,{to:\"/symptom-checker\",className:\"action-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"action-icon\",children:\"\\uD83D\\uDD0D\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Symptom Checker\"}),/*#__PURE__*/_jsx(\"p\",{children:\"AI-powered health analysis\"})]}),/*#__PURE__*/_jsxs(Link,{to:\"/behavior-solver\",className:\"action-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"action-icon\",children:\"\\uD83C\\uDFAF\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Behavior Solver\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Solve behavior problems\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your Pets\"}),/*#__PURE__*/_jsx(Link,{to:\"/pets\",className:\"btn-link\",children:\"View All\"})]}),pets.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"No pets added yet.\"}),/*#__PURE__*/_jsx(Link,{to:\"/pets\",className:\"btn btn-primary\",children:\"Add Your First Pet\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"pets-grid\",children:pets.slice(0,4).map(pet=>{var _pet$age,_pet$age2;return/*#__PURE__*/_jsxs(\"div\",{className:\"pet-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"pet-avatar\",children:getSpeciesEmoji(pet.species)}),/*#__PURE__*/_jsx(\"h3\",{children:pet.name}),/*#__PURE__*/_jsxs(\"p\",{children:[pet.breed,\" \\u2022 \",pet.species]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Age: \",((_pet$age=pet.age)===null||_pet$age===void 0?void 0:_pet$age.years)||0,\"y \",((_pet$age2=pet.age)===null||_pet$age2===void 0?void 0:_pet$age2.months)||0,\"m\"]})]},pet._id);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Upcoming Vaccinations\"}),/*#__PURE__*/_jsx(Link,{to:\"/vaccinations\",className:\"btn-link\",children:\"View All\"})]}),upcomingVaccinations.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"empty-state\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No upcoming vaccinations.\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"vaccination-list\",children:upcomingVaccinations.map(vax=>{var _vax$pet;return/*#__PURE__*/_jsxs(\"div\",{className:\"vaccination-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"vax-info\",children:[/*#__PURE__*/_jsx(\"h4\",{children:vax.vaccineName}),/*#__PURE__*/_jsxs(\"p\",{children:[(_vax$pet=vax.pet)===null||_vax$pet===void 0?void 0:_vax$pet.name,\" \\u2022 Due: \",formatDate(vax.dueDate)]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"status-badge status-\".concat(vax.status),children:vax.status})]},vax._id);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Recent Health Records\"}),/*#__PURE__*/_jsx(Link,{to:\"/symptom-checker\",className:\"btn-link\",children:\"Check Symptoms\"})]}),recentHealthRecords.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"empty-state\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No health records yet.\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"health-records\",children:recentHealthRecords.map(record=>{var _record$pet,_record$description,_record$description2;return/*#__PURE__*/_jsxs(\"div\",{className:\"health-record\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"record-header\",children:[/*#__PURE__*/_jsx(\"h4\",{children:record.title}),/*#__PURE__*/_jsx(\"span\",{className:\"urgency-badge\",style:{backgroundColor:getUrgencyColor(record.urgency)},children:record.urgency})]}),/*#__PURE__*/_jsxs(\"p\",{children:[(_record$pet=record.pet)===null||_record$pet===void 0?void 0:_record$pet.name,\" \\u2022 \",formatDate(record.createdAt)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"record-description\",children:[(_record$description=record.description)===null||_record$description===void 0?void 0:_record$description.substring(0,100),((_record$description2=record.description)===null||_record$description2===void 0?void 0:_record$description2.length)>100?'...':'']})]},record._id);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Pet Care Tips\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"tips-list\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tip-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"tip-icon\",children:\"\\uD83D\\uDCA7\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Ensure fresh water is available at all times\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tip-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"tip-icon\",children:\"\\uD83E\\uDD55\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Provide balanced nutrition appropriate for your pet's age and species\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tip-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"tip-icon\",children:\"\\uD83C\\uDFC3\\u200D\\u2642\\uFE0F\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Regular exercise is essential for physical and mental health\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tip-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"tip-icon\",children:\"\\uD83E\\uDE7A\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Schedule regular veterinary check-ups for preventive care\"})]})]})]})]})]});};export default Dashboard;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}