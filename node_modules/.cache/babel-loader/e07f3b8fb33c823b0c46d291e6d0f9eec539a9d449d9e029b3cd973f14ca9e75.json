{"ast":null,"code":"import React,{useState,useEffect}from'react';import{toast}from'react-toastify';import{healthService,petsService}from'../services/api';import{useAuth}from'../context/AuthContext';import{COMMON_SYMPTOMS}from'../utils/constants';import{getUrgencyColor}from'../utils/helpers';import LoadingSpinner from'./LoadingSpinner';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const SymptomChecker=()=>{const{user}=useAuth();const[pets,setPets]=useState([]);const[selectedPet,setSelectedPet]=useState('');const[symptoms,setSymptoms]=useState([]);const[currentSymptom,setCurrentSymptom]=useState('');const[additionalInfo,setAdditionalInfo]=useState('');const[analysis,setAnalysis]=useState(null);const[loading,setLoading]=useState(false);const[showResults,setShowResults]=useState(false);useEffect(()=>{fetchPets();},[]);const fetchPets=async()=>{try{const response=await petsService.getAll();setPets(response.data.pets||[]);if(response.data.pets.length>0){setSelectedPet(response.data.pets[0]._id);}}catch(error){console.error('Error fetching pets:',error);}};const addSymptom=()=>{if(currentSymptom&&!symptoms.includes(currentSymptom)){setSymptoms([...symptoms,currentSymptom]);setCurrentSymptom('');}};const removeSymptom=symptomToRemove=>{setSymptoms(symptoms.filter(s=>s!==symptomToRemove));};const addCommonSymptom=symptom=>{if(!symptoms.includes(symptom)){setSymptoms([...symptoms,symptom]);}};const analyzeSymptoms=async()=>{if(symptoms.length===0){toast.error('Please add at least one symptom');return;}if(!selectedPet){toast.error('Please select a pet');return;}setLoading(true);try{const response=await healthService.symptomCheck({petId:selectedPet,symptoms,additionalInfo});setAnalysis(response.data.analysis);setShowResults(true);toast.success('Symptom analysis completed!');}catch(error){console.error('Error analyzing symptoms:',error);toast.error('Error analyzing symptoms');}finally{setLoading(false);}};const resetForm=()=>{setSymptoms([]);setAdditionalInfo('');setAnalysis(null);setShowResults(false);};const getUrgencyIcon=urgency=>{switch(urgency){case'emergency':return'🚨';case'urgent':return'⚠️';case'monitor':return'✅';default:return'📋';}};return/*#__PURE__*/_jsxs(\"div\",{className:\"symptom-checker-container\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"page-header\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD83D\\uDD0D Symptom Checker AI\"}),/*#__PURE__*/_jsx(\"p\",{children:\"AI-powered analysis of your pet's symptoms\"})]})}),!showResults?/*#__PURE__*/_jsxs(\"div\",{className:\"symptom-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Select Pet\"}),/*#__PURE__*/_jsx(\"select\",{value:selectedPet,onChange:e=>setSelectedPet(e.target.value),className:\"form-control\",children:pets.map(pet=>/*#__PURE__*/_jsxs(\"option\",{value:pet._id,children:[pet.name,\" (\",pet.species,\")\"]},pet._id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Describe Symptoms\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"symptoms-input\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:currentSymptom,onChange:e=>setCurrentSymptom(e.target.value),placeholder:\"Enter symptom...\",list:\"commonSymptoms\",className:\"form-control\"}),/*#__PURE__*/_jsx(\"datalist\",{id:\"commonSymptoms\",children:COMMON_SYMPTOMS.map(symptom=>/*#__PURE__*/_jsx(\"option\",{value:symptom},symptom))}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:addSymptom,className:\"btn btn-secondary\",children:\"Add Symptom\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"common-symptoms\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Common symptoms:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"symptoms-tags\",children:COMMON_SYMPTOMS.slice(0,8).map(symptom=>/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>addCommonSymptom(symptom),className:\"symptom-tag \".concat(symptoms.includes(symptom)?'active':''),children:symptom},symptom))})]}),symptoms.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"selected-symptoms\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Selected symptoms:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"symptoms-list\",children:symptoms.map(symptom=>/*#__PURE__*/_jsxs(\"span\",{className:\"symptom-item\",children:[symptom,/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeSymptom(symptom),className:\"remove-symptom\",children:\"\\xD7\"})]},symptom))})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Additional Information\"}),/*#__PURE__*/_jsx(\"textarea\",{value:additionalInfo,onChange:e=>setAdditionalInfo(e.target.value),placeholder:\"Describe when symptoms started, severity, behavior changes, or any other relevant information...\",rows:\"4\",className:\"form-control\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-actions\",children:/*#__PURE__*/_jsx(\"button\",{onClick:analyzeSymptoms,disabled:loading||symptoms.length===0,className:\"btn btn-primary btn-large\",children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(LoadingSpinner,{size:\"small\",color:\"white\",text:\"\"}),\"Analyzing...\"]}):'Analyze Symptoms'})})]}):/*#__PURE__*//* Analysis Results */_jsxs(\"div\",{className:\"analysis-results\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"results-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Analysis Results\"}),/*#__PURE__*/_jsx(\"button\",{onClick:resetForm,className:\"btn btn-secondary\",children:\"Check Another Pet\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"urgency-alert\",style:{borderColor:getUrgencyColor(analysis.urgency)},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"urgency-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"urgency-icon\",children:getUrgencyIcon(analysis.urgency)}),/*#__PURE__*/_jsx(\"h3\",{style:{color:getUrgencyColor(analysis.urgency)},children:analysis.urgency.toUpperCase()})]}),/*#__PURE__*/_jsx(\"p\",{children:analysis.assessment})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"recommendations-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Recommendations\"}),/*#__PURE__*/_jsx(\"div\",{className:\"recommendations-list\",children:analysis.recommendations.map((rec,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"recommendation-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rec-priority\",children:[\"Priority: \",/*#__PURE__*/_jsx(\"span\",{className:\"priority-\".concat(rec.priority),children:rec.priority})]}),/*#__PURE__*/_jsx(\"h4\",{children:rec.title}),/*#__PURE__*/_jsx(\"p\",{children:rec.description})]},index))})]}),analysis.firstAidSteps&&analysis.firstAidSteps.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"first-aid-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"First Aid Steps\"}),/*#__PURE__*/_jsx(\"div\",{className:\"first-aid-steps\",children:analysis.firstAidSteps.map((step,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"first-aid-step\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"step-number\",children:step.step}),/*#__PURE__*/_jsx(\"div\",{className:\"step-description\",children:step.description})]},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"important-notes\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u26A0\\uFE0F Important Notes\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:\"This is an AI-powered assessment and should not replace professional veterinary care\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Always consult with a qualified veterinarian for accurate diagnosis and treatment\"}),/*#__PURE__*/_jsx(\"li\",{children:\"In emergency situations, go to the nearest veterinary clinic immediately\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Contact your veterinarian if symptoms persist or worsen\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"emergency-contacts\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Emergency Resources\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"contact-list\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"contact-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Animal Poison Control:\"}),\" (888) 426-4435\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"contact-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Pet Emergency Hotline:\"}),\" (855) 764-7661\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"contact-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Local Emergency Vet:\"}),\" Check your local directory\"]})]})]})]}),pets.length===0&&!showResults&&/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"empty-icon\",children:\"\\uD83D\\uDC15\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"No Pets Found\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Add a pet first to use the symptom checker.\"})]})]});};export default SymptomChecker;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}