{"ast":null,"code":"import _objectSpread from\"/root/PetPulse-Ai/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{toast}from'react-toastify';import{petsService}from'../services/api';import{useAuth}from'../context/AuthContext';import{getSpeciesEmoji,formatAge,formatWeight}from'../utils/helpers';import{PET_SPECIES,GENDER_OPTIONS,WEIGHT_UNITS}from'../utils/constants';import LoadingSpinner from'./LoadingSpinner';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PetProfile=()=>{const{user}=useAuth();const[pets,setPets]=useState([]);const[loading,setLoading]=useState(false);const[showForm,setShowForm]=useState(false);const[editingPet,setEditingPet]=useState(null);const[breeds,setBreeds]=useState([]);const[formData,setFormData]=useState({name:'',species:'dog',breed:'',age:{years:0,months:0},weight:{value:0,unit:'kg'},gender:'',location:'',color:'',birthDate:'',microchipId:'',insuranceInfo:{provider:'',policyNumber:''},vetInfo:{name:'',clinic:'',phone:'',address:''},medicalConditions:[],allergies:[],dietaryRestrictions:[]});useEffect(()=>{fetchPets();},[]);useEffect(()=>{if(formData.species){fetchBreeds(formData.species);}},[formData.species]);const fetchPets=async()=>{try{setLoading(true);const response=await petsService.getAll();setPets(response.data.pets||[]);}catch(error){console.error('Error fetching pets:',error);toast.error('Error loading pets');}finally{setLoading(false);}};const fetchBreeds=async species=>{try{const response=await petsService.getBreeds(species);setBreeds(response.data.breeds||[]);}catch(error){console.error('Error fetching breeds:',error);}};const handleChange=e=>{const{name,value}=e.target;if(name.includes('.')){const[parent,child]=name.split('.');setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[parent]:_objectSpread(_objectSpread({},prev[parent]),{},{[child]:value})}));}else{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));}};const handleSubmit=async e=>{e.preventDefault();setLoading(true);try{if(editingPet){await petsService.update(editingPet._id,formData);toast.success('Pet updated successfully!');}else{await petsService.create(formData);toast.success('Pet added successfully!');}setShowForm(false);setEditingPet(null);resetForm();fetchPets();}catch(error){var _error$response,_error$response$data;console.error('Error saving pet:',error);toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Error saving pet');}finally{setLoading(false);}};const handleEdit=pet=>{setEditingPet(pet);setFormData(_objectSpread(_objectSpread({},pet),{},{birthDate:pet.birthDate?pet.birthDate.split('T')[0]:''}));setShowForm(true);};const handleDelete=async petId=>{if(window.confirm('Are you sure you want to delete this pet? This action cannot be undone.')){try{await petsService.delete(petId);toast.success('Pet deleted successfully');fetchPets();}catch(error){console.error('Error deleting pet:',error);toast.error('Error deleting pet');}}};const resetForm=()=>{setFormData({name:'',species:'dog',breed:'',age:{years:0,months:0},weight:{value:0,unit:'kg'},gender:'',location:'',color:'',birthDate:'',microchipId:'',insuranceInfo:{provider:'',policyNumber:''},vetInfo:{name:'',clinic:'',phone:'',address:''},medicalConditions:[],allergies:[],dietaryRestrictions:[]});};const addMedicalCondition=()=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{medicalConditions:[...prev.medicalConditions,{condition:'',diagnosed:'',notes:'',severity:'moderate'}]}));};const updateMedicalCondition=(index,field,value)=>{setFormData(prev=>{const updatedConditions=[...prev.medicalConditions];updatedConditions[index][field]=value;return _objectSpread(_objectSpread({},prev),{},{medicalConditions:updatedConditions});});};const removeMedicalCondition=index=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{medicalConditions:prev.medicalConditions.filter((_,i)=>i!==index)}));};return/*#__PURE__*/_jsxs(\"div\",{className:\"pets-container\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"page-header\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD83D\\uDC15 Pet Profiles\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Manage your pet information and health records\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowForm(true),className:\"btn btn-primary\",children:\"+ Add New Pet\"})]}),showForm&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:editingPet?'Edit Pet':'Add New Pet'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowForm(false);setEditingPet(null);resetForm();},className:\"btn-close\",children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"pet-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Basic Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:formData.name,onChange:handleChange,required:true,placeholder:\"Enter pet name\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Species *\"}),/*#__PURE__*/_jsx(\"select\",{name:\"species\",value:formData.species,onChange:handleChange,required:true,children:PET_SPECIES.map(species=>/*#__PURE__*/_jsxs(\"option\",{value:species.value,children:[species.emoji,\" \",species.label]},species.value))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Breed *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"breed\",value:formData.breed,onChange:handleChange,required:true,placeholder:\"Enter breed\",list:\"breeds\"}),/*#__PURE__*/_jsx(\"datalist\",{id:\"breeds\",children:breeds.map(breed=>/*#__PURE__*/_jsx(\"option\",{value:breed.name},breed.name))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Gender\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"gender\",value:formData.gender,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Gender\"}),GENDER_OPTIONS.map(gender=>/*#__PURE__*/_jsx(\"option\",{value:gender.value,children:gender.label},gender.value))]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Age (Years)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"age.years\",value:formData.age.years,onChange:handleChange,min:\"0\",max:\"50\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Age (Months)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"age.months\",value:formData.age.months,onChange:handleChange,min:\"0\",max:\"11\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Weight\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"weight.value\",value:formData.weight.value,onChange:handleChange,min:\"0\",step:\"0.1\",placeholder:\"Weight value\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Unit\"}),/*#__PURE__*/_jsx(\"select\",{name:\"weight.unit\",value:formData.weight.unit,onChange:handleChange,children:WEIGHT_UNITS.map(unit=>/*#__PURE__*/_jsx(\"option\",{value:unit.value,children:unit.label},unit.value))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Color\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"color\",value:formData.color,onChange:handleChange,placeholder:\"Pet color\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Birth Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"birthDate\",value:formData.birthDate,onChange:handleChange})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Location\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"location\",value:formData.location,onChange:handleChange,placeholder:\"Where does your pet live?\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Microchip ID\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"microchipId\",value:formData.microchipId,onChange:handleChange,placeholder:\"Microchip identification number\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Medical Conditions\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:addMedicalCondition,className:\"btn btn-outline btn-small\",children:\"+ Add Condition\"})]}),formData.medicalConditions.map((condition,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"condition-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Condition\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:condition.condition,onChange:e=>updateMedicalCondition(index,'condition',e.target.value),placeholder:\"Medical condition\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Diagnosed\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:condition.diagnosed,onChange:e=>updateMedicalCondition(index,'diagnosed',e.target.value)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Severity\"}),/*#__PURE__*/_jsxs(\"select\",{value:condition.severity,onChange:e=>updateMedicalCondition(index,'severity',e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"mild\",children:\"Mild\"}),/*#__PURE__*/_jsx(\"option\",{value:\"moderate\",children:\"Moderate\"}),/*#__PURE__*/_jsx(\"option\",{value:\"severe\",children:\"Severe\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\xA0\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removeMedicalCondition(index),className:\"btn btn-danger btn-small\",children:\"Remove\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Notes\"}),/*#__PURE__*/_jsx(\"textarea\",{value:condition.notes,onChange:e=>updateMedicalCondition(index,'notes',e.target.value),placeholder:\"Additional notes about this condition\",rows:\"2\"})]})]},index))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Veterinarian Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Vet Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"vetInfo.name\",value:formData.vetInfo.name,onChange:handleChange,placeholder:\"Veterinarian name\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Clinic\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"vetInfo.clinic\",value:formData.vetInfo.clinic,onChange:handleChange,placeholder:\"Clinic name\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Phone\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",name:\"vetInfo.phone\",value:formData.vetInfo.phone,onChange:handleChange,placeholder:\"Clinic phone number\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"vetInfo.address\",value:formData.vetInfo.address,onChange:handleChange,placeholder:\"Clinic address\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setShowForm(false);setEditingPet(null);resetForm();},className:\"btn btn-secondary\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"btn btn-primary\",children:loading?'Saving...':editingPet?'Update Pet':'Add Pet'})]})]})]})}),loading&&pets.length===0?/*#__PURE__*/_jsx(LoadingSpinner,{text:\"Loading pets...\",centered:true}):/*#__PURE__*/_jsx(\"div\",{className:\"pets-grid\",children:pets.map(pet=>/*#__PURE__*/_jsxs(\"div\",{className:\"pet-profile-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pet-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"pet-avatar\",children:getSpeciesEmoji(pet.species)}),/*#__PURE__*/_jsxs(\"div\",{className:\"pet-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:pet.name}),/*#__PURE__*/_jsxs(\"p\",{children:[pet.breed,\" \\u2022 \",pet.species]}),/*#__PURE__*/_jsx(\"span\",{className:\"pet-age\",children:formatAge(pet.age)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pet-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Gender:\"}),/*#__PURE__*/_jsx(\"span\",{children:pet.gender||'Not specified'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Weight:\"}),/*#__PURE__*/_jsx(\"span\",{children:formatWeight(pet.weight)})]}),pet.color&&/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Color:\"}),/*#__PURE__*/_jsx(\"span\",{children:pet.color})]}),pet.location&&/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Location:\"}),/*#__PURE__*/_jsx(\"span\",{children:pet.location})]}),pet.medicalConditions.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Medical Conditions:\"}),/*#__PURE__*/_jsx(\"span\",{children:pet.medicalConditions.length})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pet-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(pet),className:\"btn btn-secondary\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(pet._id),className:\"btn btn-danger\",children:\"Delete\"})]})]},pet._id))}),pets.length===0&&!loading&&/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"empty-icon\",children:\"\\uD83D\\uDC3E\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"No Pets Added Yet\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Start by adding your first pet to track their health and vaccinations.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowForm(true),className:\"btn btn-primary\",children:\"Add Your First Pet\"})]})]});};export default PetProfile;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}